spring.datasource.url=jdbc:postgresql://localhost:5432/congestion_tracing
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.datasource.driverClassName=org.postgresql.Driver

spring.jpa.properties.hibernate.dialect=org.hibernate.spatial.dialect.postgis.PostgisDialect
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

######### Rate limiting bucket4j #########
spring.cache.jcache.config=classpath:hazelcast.xml
spring.main.allow-bean-definition-overriding=true

bucket4j.enabled=true
bucket4j.filters[0].cache-name=buckets
bucket4j.filters[0].filter-order=2147483647
bucket4j.filters[0].url=.*
bucket4j.filters[0].filter-method=servlet
bucket4j.filters[0].strategy=all

bucket4j.filters[0].rate-limits[0].execute-condition=@securityService.isAuthorized()
bucket4j.filters[0].rate-limits[0].expression=getParameter('key')
bucket4j.filters[0].rate-limits[0].bandwidths[0].capacity=5
bucket4j.filters[0].rate-limits[0].bandwidths[0].time=50
bucket4j.filters[0].rate-limits[0].bandwidths[0].unit=seconds

bucket4j.filters[0].rate-limits[1].execute-condition=!@securityService.isAuthorized()
bucket4j.filters[0].rate-limits[1].expression=getRemoteAddr()
bucket4j.filters[0].rate-limits[1].bandwidths[0].capacity=2
bucket4j.filters[0].rate-limits[1].bandwidths[0].time=50
bucket4j.filters[0].rate-limits[1].bandwidths[0].unit=seconds

#server.error.include-binding-errors=always
#server.error.include-message=always
#server.error.whitelabel.enabled=true

#HM4fQAQmLF36LCWEctCuJrEtqTtgegpG - test pass